<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>A way to manage TypeScript references « ASD</title>
  
  
    <meta name="description" content="Step by step TypeScript retrieves a new useful features such a generic types, decorators, namespaces, abstraction levels e.c. But one of the truly cool thing...">    
  

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="http://asduser.github.io/typescript/references-managing">
  <link rel="alternate" type="application/rss+xml" title="ASD" href="http://asduser.github.io/feed.xml" />
  <link rel="shortcut icon" type="image/png" href="/images/3066.png">

  <!-- <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script> -->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
</head>


  <body>

    <header class="header">
  <div class="wrapper">
    <a class="site-title" href="/">ASD</a>
    <nav class="site-nav">
      <!-- 
        
      
        
        <a class="page-link" href="/about/">About me</a>
        
      
        
        <a class="page-link" href="/category/">Category</a>
        
      
        
      
        
      
        
      
        
        <a class="page-link" href="/publications">Publications</a>
        
      
        
        <a class="page-link" href="/works">Works</a>
        
      
        
       -->            
      <a class="page-link" href="/works">Works</a>      
      <a class="page-link" href="/publications">Publications</a>
      <a class="page-link" href="/">Blog</a>
      <a class="page-link" href="/about">About</a>
    </nav>
  </div>
</header>

    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">A way to manage TypeScript references</h1>
    <p class="post-meta">Jun 28, 2016</p>
  </header>

  <article class="post-content">
    <p>Step by step TypeScript retrieves a new useful features such a generic types, decorators, namespaces, abstraction levels e.c. But one of the truly cool things, which may significantly improve code readability is modules system.</p>

<p>If you have an experience with AMD (<em>Asynchronous module definition, AMD</em>), undoubtedly you’ve worked with big JavaScript application systems. Here is the simple example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">define</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">require</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span> <span class="p">{</span>
     <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'a'</span><span class="p">),</span>
         <span class="nx">b</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'b'</span><span class="p">);</span>

     <span class="nx">exports</span><span class="p">.</span><span class="nx">action</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{};</span>
   <span class="p">});</span>
</code></pre>
</div>

<p>Now it does not matter, what exactly code above means. Just try to be aware of that feature in JavaScript before it was implemented into TypeScript.</p>

<h3 id="typescript--modules">TypeScript &amp; modules</h3>

<p>So, modules can help you manage big applications, separate a specific block of codes into independent functional entities and decrease time for debugging. You may declare module into several *.ts files, but all of them will contain a common infromation about concrete feature.</p>

<p>To declare module use:</p>

<div align="right" class="highlighter-file-title">NotificationManager.ts</div>
<pre><code class="language-typescript">module NotificationManager {
 // ... 
}
</code></pre>

<p>To make some content visible and avaliable outside (in specified module), use a following operator:</p>

<div align="right" class="highlighter-file-title">NotificationManager.ts</div>
<pre><code class="language-typescript">export interface INotificationSender {
 // ...
}
</code></pre>

<p>And in another *.ts file just refer to it like in the same file:</p>

<div align="right" class="highlighter-file-title">Another.ts</div>
<pre><code class="language-typescript">public class NotificationSender implements INotificationSender {
 // ...
}
</code></pre>

<p>What is more, you may declare not only public classes, interfaces or fucntions, but create a private functinality within module. It is very helpful when you don’t want to expose the whole functionality to another developer, just a some part of it.</p>

<h3 id="example">Example</h3>

<p>Let’s see a sample, which shows how does TypeScript modules work.</p>

<p>To start with, we’ll have a following project structure:</p>

<p><img src="/images/post/ts-modules-project-structure.png" alt="project architecture" /></p>

<p><em>user.ts</em> file contains a special module:</p>

<div align="right" class="highlighter-file-title">models/user.ts</div>
<pre><code class="language-typescript">/// &lt;reference path='../_all.ts' /&gt;

module manager {
    'use strict';
    
    export class User {
        constructor(public Name: string, public Age: number){}
        getInfo = () =&gt; {
            return `Name: ${this.Name}, age: ${this.Age}`;
        }
    }
}
</code></pre>

<p>As you see, we expose class User outside in order to use it in another file. The line <em>reference</em> means that we declare a new scope visibility.</p>

<p>It is very similar to <em>#include “stdio.h”;</em> (<strong>c++</strong>) or <em>using System;</em> (<strong>c#</strong>).</p>

<p>The next file:</p>

<div align="right" class="highlighter-file-title">main.ts</div>
<pre><code class="language-typescript">/// &lt;reference path='_all.ts' /&gt;

module manager {
    'use strict';
    
    var u1 = new User("Bob", 20);
    console.log( u1, u1.getInfo() );
}
</code></pre>

<p>If you were careful and paid attention to the <em>reference</em> title, it has the same name - it is a special trick to manage the project reference list in one file:</p>

<div align="right" class="highlighter-file-title">_all.ts</div>
<pre><code class="language-typescript">/// &lt;reference path='models/user.ts' /&gt;
/// &lt;reference path='main.ts' /&gt;
</code></pre>

<p>It is not the only one correct methodology, no. But in cases, when you use not a big project with simple structure - it is good way to manage your references, modules and support code.</p>

<h3 id="compile-sources">Compile sources</h3>

<p>And to get a final result we have to compile our *.ts files into *.js files. According to main advices on official TypeScript site, the simpliest way to do this - is using of <strong>tsc</strong> compiler.</p>

<ol>
  <li>Install <em>node.js</em>.</li>
  <li>Open terminal -&gt; <strong>npm i typescript -g</strong> (install typescript globally on your PC).</li>
  <li>To use TS compiler use command <strong>tsc</strong> in terminal with an appropriate flags.</li>
</ol>

<p>In our case we use the following command:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>tsc --out app1/output.js app1/_all.ts
</code></pre>
</div>

<h3 id="grouping-references">Grouping references</h3>

<p>So, we discussed about working with one reference in your project. If you want to use a lot of modules, classes, interfaces and properly separate them from each other, just use another trick - reference grouping.</p>

<blockquote>
  <p>The main idea is categorize all existing references by suitable types and then include them into a special reference file.</p>
</blockquote>

<p>In the beginning, let’s image we develop a specific <em>Dispatcher</em> module to work with user’s notification in our application.</p>

<div align="right" class="highlighter-file-title">Project structure</div>
<p><img src="/images/post/ts-modules-project-structure2.png" alt="project architecture" /></p>

<p>It’s just sample directories and files when the main purpose was to show you how you can manage references inside your TypeScript project.</p>

<p>To see, how it works, compile project (see the point above) and then open an index.html file, thereafter press F12 in your browser (open developer console).</p>

<div align="right" class="highlighter-file-title">Chrome - console output</div>
<p><img src="/images/post/ts-modules-console-output.png" alt="project architecture" /></p>

<p><a href="https://github.com/asduser/typescript-practice/tree/master/references-managing">Download an example project from github.</a></p>

<p><a href="https://github.com/asduser/typescript-practice/tree/master/references-managing" class="github-button">Open repository</a></p>

<p>Good luck!</p>

  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="http://asduser.github.io/images/blog_logo_sidebar.png" alt="Another Software Developer">
  <div class="col-box-title name">Another Software Developer</div>
  <p>Network Development: TypeScript, Node.js, Python, Golang, C.</p>
  <p class="contact">
    
    <!-- <a href="https://github.com/asduser">GitHub</a> -->
    <iframe src="https://ghbtns.com/github-btn.html?user=asduser&type=follow&count=true&size=large" frameborder="0" scrolling="0" width="220px" height="30px"></iframe>
    
    
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">Newest Posts</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/technologies/xmpp-messaging">XMPP Messaging - first experience</a></li>
    
      <li><a class="post-link" href="/tools/robomongo">Robomongo tool for MongoDB</a></li>
    
      <li><a class="post-link" href="/programming/nextitem-previtem-in-array">Next item\previous item in array</a></li>
    
      <li><a class="post-link" href="/typescript/web-api-error-handler">Typescript - Web API error handler</a></li>
    
      <li><a class="post-link" href="/typescript/references-managing">A way to manage TypeScript references</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">  
  <div class="col-box-title">TOC</div>
</div>
        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2016 Another Software Developer
</div>
</footer>

<script src="/js/easybook.js"></script>
<script src="/js/global-initializations.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script>
	$(document).ready(function(){
		$("pre").each(function(){
			$(this).addClass("prettyprint");
		});
	})
</script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sons-of-obsidian" defer="defer"></script>

  </body>

</html>
